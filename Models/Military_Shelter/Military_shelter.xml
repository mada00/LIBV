<?xml version="1.0"?>

<PropertyList>
    
    <path>Military_shelter_external.ac</path>
    
    <animation>
        <type>range</type>
        <min-m>0</min-m>
        <max-m>100</max-m>
    </animation>
    
    <nasal>
        <load><![CDATA[
            var activate = getprop("sim/scenery/shelter_type_01/activate");
            if (activate == nil or activate <= 0) {
                var timer_automatism = maketimer(2.0, func() {
                    var activate = getprop("sim/scenery/shelter_type_01/activate");
                    if (activate >= 1) {
                        setprop("sim/scenery/shelter_type_01/scene_light_factor",0.3 + 1 - getprop("rendering/scene/diffuse/red"));
                    };
                });
                timer_automatism.start();
                activate = 1;
            } else {
                activate += 1;
            };
            setprop("sim/scenery/shelter_type_01/activate",activate);
        ]]></load>
        <unload><![CDATA[
            var activate = getprop("sim/scenery/shelter_type_01/activate");
            if (activate <= 1) {
                setprop("sim/scenery/shelter_type_01/activate",-1);
            } else {
                setprop("sim/scenery/shelter_type_01/activate",activate - 1);
            };
        ]]></unload>
    </nasal>
    
    <model>
        <name>shelter_day_lights_01</name>
        <path>Military_shelter_animations.xml</path>
        <offsets>
            <x-m> 0.0 </x-m>
            <y-m> 0.0 </y-m>
            <z-m> 0.0 </z-m>
        </offsets>
    </model>
    
    <light>
        <name>beacon-spot-01-sx</name>
        <type>spot</type>
        <position>
            <x-m>7.0</x-m>
            <y-m>-20.0</y-m>
            <z-m>6.0</z-m>
        </position>
        <direction>
            <pitch-deg>20.0</pitch-deg>
            <roll-deg>-45.0</roll-deg>
            <heading-deg>0.0</heading-deg>
        </direction>
        <ambient>
            <r>0.5</r>
            <g>0.5</g>
            <b>0.5</b>
            <a>1</a>
        </ambient>
        <diffuse>
            <r>20</r>
            <g>22.0</g>
            <b>25.0</b>
            <a>1</a>
        </diffuse>
        <specular>
            <r>0.2</r>
            <g>0.2</g>
            <b>0.2</b>
            <a>1</a>
        </specular>
        <attenuation>
            <c>1.0</c>
            <l>0.5</l>
            <q>0.05</q>
        </attenuation>
        <spot-exponent>1</spot-exponent>
        <spot-cutoff>89</spot-cutoff>
        <range-m>20.0</range-m>
        <dim-factor>
            <property>sim/scenery/shelter_type_01/scene_light_factor</property>
        </dim-factor>
    </light>
    
    <light>
        <name>beacon-spot-01-sx</name>
        <type>spot</type>
        <position>
            <x-m>-7.0</x-m>
            <y-m>-20.0</y-m>
            <z-m>6.0</z-m>
        </position>
        <direction>
            <pitch-deg>-20.0</pitch-deg>
            <roll-deg>-45.0</roll-deg>
            <heading-deg>0.0</heading-deg>
        </direction>
        <ambient>
            <r>0.5</r>
            <g>0.5</g>
            <b>0.5</b>
            <a>1</a>
        </ambient>
        <diffuse>
            <r>20</r>
            <g>22.0</g>
            <b>25.0</b>
            <a>1</a>
        </diffuse>
        <specular>
            <r>0.2</r>
            <g>0.2</g>
            <b>0.2</b>
            <a>1</a>
        </specular>
        <attenuation>
            <c>1.0</c>
            <l>0.5</l>
            <q>0.05</q>
        </attenuation>
        <spot-exponent>1</spot-exponent>
        <spot-cutoff>89</spot-cutoff>
        <range-m>20.0</range-m>
        <dim-factor>
            <property>sim/scenery/shelter_type_01/scene_light_factor</property>
        </dim-factor>
    </light>
    
</PropertyList>
